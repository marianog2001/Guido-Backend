<div>
    <div>
        Bienvenido
        {{user.first_name}}!!
        <br />
        Email asociado:
        {{user.email}}
    </div>
    <div class="my-5">
        <label for="searchBar">Search:
            <input type="text" id="searchInput" /></label>
        <select name="" id="sortOptionSelect">
            <option value=""><i>Sorting</i></option>
            <option value="1">Ascendent</option>
            <option value="-1">Descendant</option>
        </select>
        <span>Categories:
            <a
                class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 border border-blue-700 rounded"
                href="/api/products/?cat=classic_guitar"
            >Classic guitar</a>
            ||
            <a
                class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 border border-blue-700 rounded"
                href="/api/products/?cat=acoustic_guitar"
            >Acoustic guitar</a>
            ||
            <a
                class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 border border-blue-700 rounded"
                href="/api/products/?cat=electric_guitar"
            >Electric guitar</a>
            ||
            <a
                class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 border border-blue-700 rounded"
                href="/api/products/?cat=electric_bass"
            >Electric bass</a></span>
        <a
            class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 border border-blue-700 rounded"
            href="#"
            onclick="showStock()"
        >Show only in stock</a>
    </div>
    <div class="grid gap-5 grid-cols-3">
        {{#each docs}}
            <div class="h-[100%] break-before">
                {{#if this.thumbnail}}
                    <img src={{this.thumbnail.[0]}} alt="" />
                {{else}}
                    <img
                        class="w-full h-[405px]"
                        src="/default-thumbnail.png"
                        alt=""
                    />
                {{/if}}
                <h3>{{this.title}}</h3>
                <div class="flex justify-between">
                    <h4
                        class="bg-green-500 text-black font-bold py-2 px-4 border border-green-700 rounded"
                    >${{this.price}}
                    </h4>
                    <a
                        class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 border border-blue-700 rounded"
                        href="/api/products/{{this._id}}"
                    >More info</a>

                    <button
                        class="addToCart bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 border border-blue-700 rounded"
                        data-id="{{this._id}}"
                    >
                        Add to cart
                    </button>

                </div>
            </div>
        {{/each}}

    </div>
    <div>
        {{#if hasPrevPage}}
            <a
                class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 border border-blue-700 rounded"
                href="#"
                onclick="changePageButton({{prevPage}})"
            >prev page</a>
        {{else}}
            <a class="disabled pointer-events-none">prev page</a>
        {{/if}}

        {{#if hasNextPage}}
            <a
                class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 border border-blue-700 rounded"
                href="#"
                onclick="changePageButton({{nextPage}})"
            >next page</a>
        {{else}}
            <a
                class="bg-gray-400 text-gray-700 font-bold py-2 px-4 border border-gray-700 rounded disabled pointer-events-none"
            >next page</a>
        {{/if}}

    </div>
</div>

<script>
    function handleAddToCart(productId, cartId) { addToCart(productId, cartId) }
</script>
<script src="/js/products.js"></script>